<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="jw">

    <!-- 한 가게의 예약 리스트 정보 조회 -->
    <select id="selectReserveList" parameterType="int" resultType="com.javaex.vo.ReserveVo">
		SELECT r.*, d.*, p.*, b.*
		FROM reserve r
		JOIN dog d ON r.dogNo = d.dogNo
		JOIN rsPrice rp ON r.rsNo = rp.rsNo
		JOIN price p ON rp.priceNo = p.priceNo
		JOIN beautylist b ON p.beautyNo = b.beautyNo
		WHERE r.bNo = #{bNo};
    </select>
    
      <!--  (test)
        SELECT r.*,
               d.*
        FROM reserve r
        JOIN dog d ON r.dogNo = d.dogNo
        WHERE r.bNo = #{bNo};
      -->

    <!-- 예약 정보 업데이트 -->
    <update id="updateReserve" parameterType="com.javaex.vo.ReserveVo">
        UPDATE reserve
        SET attitude = #{attitude},
            rCondition = #{rCondition},
            tangle = #{tangle},
            disliked = #{disliked},
            bath = #{bath},
            message = #{message},
            curruntWeight = #{curruntWeight}
        WHERE rsNo = #{rsNo};
    </update>

</mapper>